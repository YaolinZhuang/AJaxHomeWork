
@{
    ViewData["Title"] = "Fetch";
}
<h2 id="myH"></h2>
<h1>Fetch</h1>
<img id="img1" class="w-25" />
<ul id="ul1">
@section Scripts{
    <script>
        console.log(fetch('@Url.Content("/api/index")'));
            fetch('@Url.Content("/api/index")')
            .then(response=>{
                console.log(response)
                console.log(response.ok)
            })
        fetch('@Url.Content("/api/index")')
            .then(Response=>Response.text())
            .then(data=>{
                document.querySelector('#myH').innerHTML=data;
            })
    
        fetch('@Url.Content("/api/getImageByte/2")')
            .then(response => response.blob())
            .then(datas => {
                const myImg = document.querySelector('#img1');
                myImg.src = URL.createObjectURL(datas);
            })
        fetch('@Url.Content("/api/cities")')
        .then(Response =>Response.json())
                .then(datas => {
                    const lis = datas.map(city => `<li>${city}</li>`)
                    document.querySelector('#ul1').innerHTML = lis.join("")
                })
    </script>
}
